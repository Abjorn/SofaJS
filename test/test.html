<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>SofaJS Test</title>
  <style>
    div#main {
      background-color: #dbdbdb;
      border-radius: 5px;
      box-shadow: 0 2px 5px #666;
      font-family: Arial, Verdana, Helvetica, sans-serif;
      margin: 5px auto;
      padding: 15px;
      text-shadow: 1px 1px 0 #fff;
      width: 930px;
    }
    div#main h1 { margin-top: 5px; }
  </style>
</head>
<body>
  <div id="main"></div>
  <!--[if lt IE 7 ]> <script src="json2.js"></script> <![endif]-->
  <script src="../sofa.js"></script>
  <script>
  (function () {
  
    var main = document.getElementById("main");
    Sofa.config({ server : "http://localhost/db/" });
    
    Sofa.status(function (res) {
      main.innerHTML = "<h1>" + res.couchdb + " (" + res.version + ")" + "</h1>";
      var db = new Sofa.DB("sofa_test");
      
      db.all(function (docs) {
        var ul = "<h2>All Documents</h2><ul>";
        for (var i = 0; i < docs.length; i++) {
          ul += "<li>" + docs[i].id + "</li>";
        }
        main.innerHTML += ul + "</ul>";
      });
      
      db.view({
        doc : "notes",
        view : "all",
        success : function (docs) {
          var str = "<h2>Notes View</h2>";
          for (var i = 0; i < docs.length; i++) {
            str += "<h3>" + docs[i].key + "</h3><p>" + docs[i].value + "</p>";
          }
          main.innerHTML += str;
        }
      });
      
      db.show({
        doc : "notes",
        show : "summary",
        id : "336cccfbb206207c0a950db5fd0a50b6",
        success : function (res) {
          main.innerHTML += "<h2>Note Document Show</h2>" + res;
        }
      });
      
    });
    
  }());
  </script>
</body>
</html>